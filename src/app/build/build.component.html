<div>
  <mat-card-header class="card big-card">
    <mat-card-title class="card-title">Choose Your Parts</mat-card-title>
  </mat-card-header>
</div>

<div fxLayout="row" fxLayoutAlign="center center">
  <div fxFlex="15%">

  </div>
  <div fxFlex="70%">

    <br>
    <br>

    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 demo-table">
      <!-- Position Column -->
      <ng-container matColumnDef="component">
        <th mat-header-cell *matHeaderCellDef> Component </th>
        <td mat-cell *matCellDef="let product" style="font-weight: bold; text-decoration: underline; color:darkblue;">{{ product.component }}</td>
      </ng-container>
      <!-- Picture Column -->
      <ng-container matColumnDef="picture">
        <th mat-header-cell *matHeaderCellDef>Selection</th>
        <td mat-cell *matCellDef="let product">

            <div fxLayout="row" fxLayoutAlign="right center" *ngIf="product.picture">
              <div fxFlex="20%">
                <mat-card style="width: 80px; height: 50px;">
                <img  src="assets/{{ product.picture }}" mat-card-image
                     [style.width]="'100%'" [style.height]="'100%'" alt="No Picture">
                </mat-card>
              </div>
              <div fxFlex="80%">
                <span style="font-weight: bold; font-size: medium">{{product.name}}</span>
              </div>

            </div>
            <button *ngIf="! (product.picture) " mat-raised-button style="width:300px; " (click)="chooseProduct(product.component); $event.stopPropagation()" color="primary" > + Choose a {{product.component}}</button>

        </td>
      </ng-container>


      <!-- Name Column -->
<!--      <ng-container matColumnDef="name">-->
<!--        <th mat-header-cell *matHeaderCellDef>  </th>-->
<!--        <td mat-cell *matCellDef="let product"> {{ product.name }} </td>-->
<!--      </ng-container>-->

      <!-- Price Column -->
      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef> Price </th>
        <td mat-cell *matCellDef="let product">
          <span style="font-weight: bold; font-size: medium" *ngIf="product.price">{{ product.price }}</span>
        </td>
      </ng-container>


      <ng-container matColumnDef="remove">
        <th mat-header-cell *matHeaderCellDef>Remove</th>
        <td mat-cell *matCellDef="let product">
          <button *ngIf="product.name" mat-button (click)="RemoveComponent(product.component); $event.stopPropagation()" color="warn" >
            <mat-icon>delete</mat-icon>
          </button>
        </td>
      </ng-container>



      <!-- Header Row Definition -->
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

      <!-- Row Definition -->
      <tr mat-row
          (click)="redirectFunction(product.id)"
          *matRowDef="let product; columns: displayedColumns;"></tr>
    </table>

    <mat-divider></mat-divider>
    <br>

    <div class="example-button-row" fxLayout="row" fxLayoutAlign="end">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <span style="font-size: large;">Total:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="total-price">{{totalPrice}} TND</span></span>
        <button mat-raised-button color="primary" (click)="openDialog()" style="margin-left: 10px;">Save</button>
      </div>
    </div>
  </div>

  <div fxFlex="15%">

  </div>
</div>



